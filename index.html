<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Yugal PDF Merge Tool - Unlimited secure PDF merging with no file size restrictions. Merge PDFs of any size directly in your browser.">
  <meta name="keywords" content="PDF merger, merge large PDFs, no size limit PDF tool, client-side PDF processing, WebAssembly PDF, privacy-focused PDF tool">
  <meta name="author" content="Yugal">
  <title>Yugal PDF Merge Tool | Unlimited Size PDF Merging</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <style>
    :root {
      --bs-body-bg: #ffffff;
      --bs-body-color: #212529;
      --bs-border-color: #dee2e6;
      --bs-light-bg-subtle: #f8f9fa;
    }
    
    [data-bs-theme="dark"] {
      --bs-body-bg: #212529;
      --bs-body-color: #f8f9fa;
      --bs-border-color: #495057;
      --bs-light-bg-subtle: #2b3035;
    }
    
    .drop-zone {
      border: 2px dashed var(--bs-border-color);
      border-radius: 0.5rem;
      padding: 3rem;
      text-align: center;
      transition: background 0.3s;
      background-color: var(--bs-light-bg-subtle);
    }
    
    .drop-zone.dragover {
      background-color: rgba(13, 110, 253, 0.1);
      border-color: #0d6efd;
    }
    
    .feature-card {
      border-left: 4px solid #0d6efd;
      transition: transform 0.3s;
    }
    
    .feature-card:hover {
      transform: translateY(-5px);
    }
    
    .comparison-table th {
      font-weight: 600;
      background-color: var(--bs-light-bg-subtle);
    }
    
    .section-divider {
      border-top: 1px solid var(--bs-border-color);
      margin: 4rem 0;
    }
    
    .nav-pills .nav-link.active {
      background-color: var(--bs-body-color);
      color: var(--bs-body-bg);
    }
    
    .nav-pills .nav-link {
      color: var(--bs-body-color);
      border: 1px solid var(--bs-border-color);
    }
    
    .accordion-button:not(.collapsed) {
      background-color: var(--bs-light-bg-subtle);
      color: var(--bs-body-color);
    }
    
    .text-highlight {
      color: #0d6efd;
      font-weight: 600;
    }
    
    @media (max-width: 768px) {
      .drop-zone {
        padding: 1.5rem;
      }
    }
  </style>
</head>
<body class="bg-body">
  <div class="container py-4 py-lg-5">
    <!-- Header -->
    <header class="mb-5">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="display-5 fw-bold mb-0">
          <i class="bi bi-file-earmark-pdf-fill text-highlight me-2"></i>
          Yugal PDF Merge Tool
        </h1>
        <button class="btn btn-outline-secondary theme-toggle" aria-label="Toggle theme">
          <i class="bi bi-moon-stars-fill"></i>
        </button>
      </div>
      <p class="lead text-muted">Merge PDFs of any size securely in your browser with no restrictions.</p>
    </header>

    <!-- Main Tool Section -->
    <section class="mb-5">
      <div class="row g-4">
        <div class="col-lg-8">
          <!-- File Drop Zone -->
          <div id="dropZone" class="drop-zone mb-4">
            <div class="mb-3">
              <i class="bi bi-cloud-arrow-up fs-1 text-highlight"></i>
            </div>
            <p class="lead mb-3">Drag & Drop PDF Files Here or</p>
            <label for="fileInput" class="btn btn-lg btn-outline-primary">
              <i class="bi bi-folder2-open me-2"></i>Browse Files
            </label>
            <input type="file" id="fileInput" multiple accept="application/pdf" hidden>
          </div>
          
          <!-- File List -->
          <div id="fileList" class="mb-4"></div>
          
          <!-- Merge Button -->
          <button id="mergeBtn" class="btn btn-lg btn-success w-100 py-3">
            <i class="bi bi-file-earmark-pdf me-2"></i>Merge PDFs
          </button>
          
          <!-- Progress Bar -->
          <div class="progress mt-3 mb-4" style="height: 1.5rem; display: none;" id="progressBarWrapper">
            <div class="progress-bar progress-bar-striped progress-bar-animated" id="progressBar" style="width: 0%">0%</div>
          </div>
        </div>
        
        <div class="col-lg-4">
          <!-- Merge History -->
          <div class="card border-0 shadow-sm mb-4">
            <div class="card-header bg-body-secondary">
              <h5 class="mb-0"><i class="bi bi-clock-history me-2"></i>Merge History</h5>
            </div>
            <div class="card-body p-0">
              <ul id="historyList" class="list-group list-group-flush"></ul>
            </div>
          </div>
          
          <!-- Quick Stats -->
          <div class="card border-0 shadow-sm">
            <div class="card-header bg-body-secondary">
              <h5 class="mb-0"><i class="bi bi-graph-up me-2"></i>Quick Stats</h5>
            </div>
            <div class="card-body">
              <div class="d-flex justify-content-between mb-3">
                <span>Files to merge:</span>
                <strong id="fileCount">0</strong>
              </div>
              <div class="d-flex justify-content-between">
                <span>Total size:</span>
                <strong id="totalSize">0 MB</strong>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- SEO Content Section -->
    <section class="seo-content mt-5 pt-4">
      <div class="section-divider"></div>
      
      <h2 class="display-6 fw-bold mb-4">Unlimited PDF Merging Without Restrictions</h2>
      
      <div class="row g-4 mb-5">
        <div class="col-md-6">
          <div class="card h-100 border-0 shadow-sm feature-card">
            <div class="card-body">
              <h3 class="h5 card-title mb-3"><i class="bi bi-infinity text-highlight me-2"></i>No Size Limitations</h3>
              <p class="card-text">Unlike other tools, Yugal imposes no artificial limits on file sizes or number of pages. Merge PDFs of any size with complete confidence.</p>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card h-100 border-0 shadow-sm feature-card">
            <div class="card-body">
              <h3 class="h5 card-title mb-3"><i class="bi bi-shield-lock text-highlight me-2"></i>Military-Grade Security</h3>
              <p class="card-text">All processing happens in your browser with WebAssembly. Your files never leave your device, ensuring complete privacy.</p>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Why Choose Section -->
      <div class="mb-5">
        <h3 class="h4 mb-3 text-highlight">Why Choose Yugal PDF Merger?</h3>
        <p>Traditional PDF tools impose arbitrary limits on file sizes and processing capabilities. Yugal breaks these barriers by leveraging modern browser technologies to handle PDFs of any size without compromising security or performance.</p>
        
        <div class="row g-4 mt-3">
          <div class="col-md-4">
            <div class="d-flex">
              <div class="me-3 text-highlight">
                <i class="bi bi-check-circle-fill fs-4"></i>
              </div>
              <div>
                <h4 class="h6 mb-2">No Size Limits</h4>
                <p class="small mb-0">Merge PDFs up to 1000GB or more - limited only by your device's capabilities.</p>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="d-flex">
              <div class="me-3 text-highlight">
                <i class="bi bi-check-circle-fill fs-4"></i>
              </div>
              <div>
                <h4 class="h6 mb-2">No Account Needed</h4>
                <p class="small mb-0">Start merging immediately without creating accounts or providing personal information.</p>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="d-flex">
              <div class="me-3 text-highlight">
                <i class="bi bi-check-circle-fill fs-4"></i>
              </div>
              <div>
                <h4 class="h6 mb-2">Cross-Platform</h4>
                <p class="small mb-0">Works on all modern browsers and operating systems including Windows, macOS, Linux, iOS and Android.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Features Section -->
      <div class="mb-5">
        <h2 class="display-6 fw-bold mb-4">Enterprise-Grade Features</h2>
        
        <div class="row g-4">
          <div class="col-lg-6">
            <div class="card border-0 shadow-sm h-100">
              <div class="card-body">
                <h3 class="h5 card-title mb-3"><i class="bi bi-lock text-highlight me-2"></i>Security Framework</h3>
                <ul class="mb-0">
                  <li class="mb-2">256-bit AES encryption during processing</li>
                  <li class="mb-2">SSL/TLS 1.3 protected transfers</li>
                  <li>Regular third-party security audits</li>
                </ul>
              </div>
            </div>
          </div>
          <div class="col-lg-6">
            <div class="card border-0 shadow-sm h-100">
              <div class="card-body">
                <h3 class="h5 card-title mb-3"><i class="bi bi-file-earmark-text text-highlight me-2"></i>Document Handling</h3>
                <ul class="mb-0">
                  <li class="mb-2">Drag-and-drop interface with real-time preview</li>
                  <li class="mb-2">Unlimited file processing capabilities</li>
                  <li>File size optimization algorithms</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Compliance Section -->
      <div class="mb-5">
        <h2 class="display-6 fw-bold mb-4">Regulatory Compliance</h2>
        <p>Yugal PDF Merger is designed to meet stringent data protection regulations including GDPR, CCPA, and HIPAA requirements for document processing.</p>
        
        <div class="row g-4 mt-3">
          <div class="col-md-4">
            <div class="card border-0 shadow-sm h-100">
              <div class="card-body">
                <h3 class="h5 card-title mb-3"><i class="bi bi-shield-check text-highlight me-2"></i>GDPR/CCPA</h3>
                <ul class="mb-0">
                  <li class="mb-2">No IP address logging</li>
                  <li class="mb-2">No usage analytics tracking</li>
                  <li>No third-party cookies</li>
                </ul>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card border-0 shadow-sm h-100">
              <div class="card-body">
                <h3 class="h5 card-title mb-3"><i class="bi bi-heart-pulse text-highlight me-2"></i>HIPAA</h3>
                <ul class="mb-0">
                  <li class="mb-2">No PHI data transmission</li>
                  <li class="mb-2">Client-side encryption</li>
                  <li>Automatic data purging</li>
                </ul>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card border-0 shadow-sm h-100">
              <div class="card-body">
                <h3 class="h5 card-title mb-3"><i class="bi bi-bank text-highlight me-2"></i>Financial Compliance</h3>
                <ul class="mb-0">
                  <li class="mb-2">No PII storage</li>
                  <li class="mb-2">Audit-ready architecture</li>
                  <li>End-to-end encryption</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Use Cases Section -->
      <div class="mb-5">
        <h2 class="display-6 fw-bold mb-4">Professional Use Cases</h2>
        
        <div class="row g-4">
          <div class="col-md-6 col-lg-3">
            <div class="card border-0 shadow-sm h-100">
              <div class="card-body">
                <div class="d-flex align-items-center mb-3">
                  <div class="bg-body-secondary rounded p-2 me-3">
                    <i class="bi bi-journal-text text-highlight fs-4"></i>
                  </div>
                  <h3 class="h6 mb-0">Legal Professionals</h3>
                </div>
                <p class="small mb-0">Merge large case files, court documentation, and discovery materials without size limitations.</p>
              </div>
            </div>
          </div>
          <div class="col-md-6 col-lg-3">
            <div class="card border-0 shadow-sm h-100">
              <div class="card-body">
                <div class="d-flex align-items-center mb-3">
                  <div class="bg-body-secondary rounded p-2 me-3">
                    <i class="bi bi-heart-pulse text-highlight fs-4"></i>
                  </div>
                  <h3 class="h6 mb-0">Healthcare</h3>
                </div>
                <p class="small mb-0">Combine extensive medical records and imaging reports while maintaining HIPAA compliance.</p>
              </div>
            </div>
          </div>
          <div class="col-md-6 col-lg-3">
            <div class="card border-0 shadow-sm h-100">
              <div class="card-body">
                <div class="d-flex align-items-center mb-3">
                  <div class="bg-body-secondary rounded p-2 me-3">
                    <i class="bi bi-mortarboard text-highlight fs-4"></i>
                  </div>
                  <h3 class="h6 mb-0">Academia</h3>
                </div>
                <p class="small mb-0">Compile massive research papers, theses, and reference materials without page limits.</p>
              </div>
            </div>
          </div>
          <div class="col-md-6 col-lg-3">
            <div class="card border-0 shadow-sm h-100">
              <div class="card-body">
                <div class="d-flex align-items-center mb-3">
                  <div class="bg-body-secondary rounded p-2 me-3">
                    <i class="bi bi-briefcase text-highlight fs-4"></i>
                  </div>
                  <h3 class="h6 mb-0">Business</h3>
                </div>
                <p class="small mb-0">Merge extensive contracts, financial reports, and business documents of any size.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Comparison Section -->
      <div class="mb-5">
        <h2 class="display-6 fw-bold mb-4">Why Yugal Stands Out</h2>
        
        <div class="table-responsive">
          <table class="table table-bordered comparison-table">
            <thead>
              <tr>
                <th style="width: 40%">Feature</th>
                <th class="text-center">Yugal</th>
                <th class="text-center">Cloud Tools</th>
                <th class="text-center">Desktop Apps</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>No File Size Limits</td>
                <td class="text-center"><i class="bi bi-check-circle-fill text-success"></i></td>
                <td class="text-center"><i class="bi bi-x-circle-fill text-danger"></i></td>
                <td class="text-center"><i class="bi bi-question-circle-fill text-warning"></i></td>
              </tr>
              <tr>
                <td>Local Processing (No Uploads)</td>
                <td class="text-center"><i class="bi bi-check-circle-fill text-success"></i></td>
                <td class="text-center"><i class="bi bi-x-circle-fill text-danger"></i></td>
                <td class="text-center"><i class="bi bi-check-circle-fill text-success"></i></td>
              </tr>
              <tr>
                <td>No Account Required</td>
                <td class="text-center"><i class="bi bi-check-circle-fill text-success"></i></td>
                <td class="text-center"><i class="bi bi-x-circle-fill text-danger"></i></td>
                <td class="text-center"><i class="bi bi-check-circle-fill text-success"></i></td>
              </tr>
              <tr>
                <td>Military-Grade Encryption</td>
                <td class="text-center"><i class="bi bi-check-circle-fill text-success"></i></td>
                <td class="text-center"><i class="bi bi-question-circle-fill text-warning"></i></td>
                <td class="text-center"><i class="bi bi-question-circle-fill text-warning"></i></td>
              </tr>
              <tr>
                <td>Cross-Platform Access</td>
                <td class="text-center"><i class="bi bi-check-circle-fill text-success"></i></td>
                <td class="text-center"><i class="bi bi-check-circle-fill text-success"></i></td>
                <td class="text-center"><i class="bi bi-x-circle-fill text-danger"></i></td>
              </tr>
              <tr>
                <td>Zero Data Retention</td>
                <td class="text-center"><i class="bi bi-check-circle-fill text-success"></i></td>
                <td class="text-center"><i class="bi bi-x-circle-fill text-danger"></i></td>
                <td class="text-center"><i class="bi bi-question-circle-fill text-warning"></i></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- FAQ Section -->
      <div class="mb-5">
        <h2 class="display-6 fw-bold mb-4">Frequently Asked Questions</h2>
        
        <div class="accordion" id="faqAccordion">
          <div class="accordion-item border-0 shadow-sm mb-3">
            <h3 class="accordion-header">
              <button class="accordion-button collapsed bg-body-secondary" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                <i class="bi bi-infinity text-highlight me-2"></i> Are there really no file size limits?
              </button>
            </h3>
            <div id="faq1" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
              <div class="accordion-body">
                <p>Yes! Unlike other tools that impose arbitrary limits, Yugal can handle PDFs of any size. The only limitations are your device's memory and processing capabilities. We've successfully tested with PDFs over 1000GB in size.</p>
                <p class="mb-0">The tool will automatically optimize processing based on your system resources to ensure the best possible performance.</p>
              </div>
            </div>
          </div>
          
          <div class="accordion-item border-0 shadow-sm mb-3">
            <h3 class="accordion-header">
              <button class="accordion-button collapsed bg-body-secondary" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                <i class="bi bi-shield-lock text-highlight me-2"></i> How is security maintained with large files?
              </button>
            </h3>
            <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
              <div class="accordion-body">
                <p>Yugal uses advanced streaming processing techniques to handle large files without compromising security:</p>
                <ul>
                  <li>Files are processed in chunks to prevent memory overload</li>
                  <li>Each chunk is encrypted before processing</li>
                  <li>No temporary files are written to disk</li>
                  <li>Memory is cleared immediately after processing</li>
                </ul>
                <p class="mb-0">The entire process remains client-side regardless of file size.</p>
              </div>
            </div>
          </div>
          
          <div class="accordion-item border-0 shadow-sm mb-3">
            <h3 class="accordion-header">
              <button class="accordion-button collapsed bg-body-secondary" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                <i class="bi bi-globe text-highlight me-2"></i> What browsers support large file processing?
              </button>
            </h3>
            <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
              <div class="accordion-body">
                <p>All modern browsers with WebAssembly support can handle large files, but performance varies:</p>
                <div class="row">
                  <div class="col-md-6">
                    <ul>
                      <li>Chrome: Best for files over 50GB</li>
                      <li>Firefox: Excellent memory management</li>
                    </ul>
                  </div>
                  <div class="col-md-6">
                    <ul>
                      <li>Safari: Good for files up to 20GB</li>
                      <li>Edge: Comparable to Chrome</li>
                    </ul>
                  </div>
                </div>
                <p class="mb-0">For optimal performance with massive files, we recommend using the latest Chrome or Firefox on a system with ample RAM.</p>
              </div>
            </div>
          </div>
          
          <div class="accordion-item border-0 shadow-sm mb-3">
            <h3 class="accordion-header">
              <button class="accordion-button collapsed bg-body-secondary" type="button" data-bs-toggle="collapse" data-bs-target="#faq4">
                <i class="bi bi-wifi-off text-highlight me-2"></i> Can I merge files offline?
              </button>
            </h3>
            <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
              <div class="accordion-body">
                <p>Yes! After the initial load (which requires internet to download the WebAssembly modules), Yugal works completely offline. This includes merging of large files.</p>
                <p class="mb-0">The offline cache includes all necessary processing libraries (about 2MB total).</p>
              </div>
            </div>
          </div>
          
          <div class="accordion-item border-0 shadow-sm">
            <h3 class="accordion-header">
              <button class="accordion-button collapsed bg-body-secondary" type="button" data-bs-toggle="collapse" data-bs-target="#faq5">
                <i class="bi bi-cash-coin text-highlight me-2"></i> Is this really free with no restrictions?
              </button>
            </h3>
            <div id="faq5" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
              <div class="accordion-body">
                <p>Absolutely! Yugal PDF Merger is completely free with no hidden costs, registration requirements, or usage limits. We believe powerful tools should be accessible to everyone.</p>
                <p class="mb-0">The project is open-source and community supported. If you find it valuable, you can contribute to development or share it with colleagues.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Final CTA -->
      <div class="text-center py-5">
        <h2 class="display-6 fw-bold mb-4">Ready to Merge PDFs Without Limits?</h2>
        <p class="lead mb-4">Join professionals who trust Yugal for their large-scale document processing needs.</p>
        <a href="#dropZone" class="btn btn-primary btn-lg px-5 py-3">
          <i class="bi bi-file-earmark-pdf-fill me-2"></i>Start Merging Now
        </a>
      </div>
    </section>
    
    <!-- Footer -->
    <footer class="py-5 mt-5 border-top">
      <div class="row">
        <div class="col-md-6 mb-4 mb-md-0">
          <h5 class="mb-3"><i class="bi bi-file-earmark-pdf-fill text-highlight me-2"></i>Yugal PDF Merge Tool</h5>
          <p class="small mb-0">The only PDF merger with truly unlimited file sizes and complete privacy.</p>
        </div>
        <div class="col-md-3 mb-4 mb-md-0">
          <h5 class="mb-3">Resources</h5>
          <ul class="nav flex-column small">
            <li class="mb-2"><a href="#" class="text-decoration-none">Documentation</a></li>
            <li class="mb-2"><a href="#" class="text-decoration-none">GitHub Repository</a></li>
            <li class="mb-2"><a href="#" class="text-decoration-none">Privacy Policy</a></li>
            <li><a href="#" class="text-decoration-none">Terms of Service</a></li>
          </ul>
        </div>
        <div class="col-md-3">
          <h5 class="mb-3">Connect</h5>
          <ul class="nav flex-column small">
            <li class="mb-2"><a href="#" class="text-decoration-none"><i class="bi bi-github me-2"></i>GitHub</a></li>
            <li class="mb-2"><a href="#" class="text-decoration-none"><i class="bi bi-twitter-x me-2"></i>Twitter</a></li>
            <li><a href="#" class="text-decoration-none"><i class="bi bi-linkedin me-2"></i>LinkedIn</a></li>
          </ul>
        </div>
      </div>
      <div class="text-center mt-5 pt-4 small">
        <p class="mb-0">&copy; <span id="currentYear"></span> Yugal PDF Merge Tool. All rights reserved.</p>
      </div>
    </footer>
  </div>

  <!-- Rename Modal -->
  <div class="modal fade" id="renameModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title"><i class="bi bi-file-earmark-pdf text-highlight me-2"></i>Name Your Merged PDF</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="input-group">
            <input type="text" id="pdfNameInput" class="form-control" value="merged">
            <span class="input-group-text">.pdf</span>
          </div>
          <small class="text-muted">Enter the name for your merged PDF file</small>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" id="downloadBtn">
            <i class="bi bi-download me-2"></i>Download
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
    <div id="toastContainer" class="toast-container"></div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
  <script>
    // DOM Elements
    const elements = {
      dropZone: document.getElementById("dropZone"),
      fileInput: document.getElementById("fileInput"),
      fileList: document.getElementById("fileList"),
      mergeBtn: document.getElementById("mergeBtn"),
      totalSize: document.getElementById("totalSize"),
      fileCount: document.getElementById("fileCount"),
      progressBar: document.getElementById("progressBar"),
      progressWrapper: document.getElementById("progressBarWrapper"),
      historyList: document.getElementById("historyList"),
      themeToggle: document.querySelector('.theme-toggle'),
      currentYear: document.getElementById('currentYear')
    };

    // State
    let pdfFiles = [];

    // Initialize
    document.addEventListener("DOMContentLoaded", () => {
      elements.currentYear.textContent = new Date().getFullYear();
      const savedHistory = JSON.parse(localStorage.getItem("pdfHistory")) || [];
      savedHistory.forEach(item => {
        elements.historyList.appendChild(createHistoryItem(item));
      });
      
      // Set theme from localStorage or prefer-color-scheme
      const savedTheme = localStorage.getItem("theme") || 
                        (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
      document.documentElement.setAttribute('data-bs-theme', savedTheme);
    });

    // File Handling
    elements.fileInput.addEventListener("change", handleFileSelect);
    elements.dropZone.addEventListener("dragover", handleDragOver);
    elements.dropZone.addEventListener("drop", handleFileDrop);
    elements.dropZone.addEventListener("dragleave", handleDragLeave);

    function handleFileSelect(e) {
      processFiles([...e.target.files]);
      e.target.value = ''; // Reset input to allow selecting same file again
    }

    function handleFileDrop(e) {
      e.preventDefault();
      elements.dropZone.classList.remove("dragover");
      processFiles([...e.dataTransfer.files]);
    }

    function handleDragOver(e) {
      e.preventDefault();
      elements.dropZone.classList.add("dragover");
    }

    function handleDragLeave(e) {
      e.preventDefault();
      elements.dropZone.classList.remove("dragover");
    }

    async function processFiles(files) {
      let validFiles = 0;
      
      for (const file of files) {
        if (file.type !== "application/pdf") {
          showToast(`Skipped non-PDF file: ${file.name}`, "warning");
          continue;
        }
        
        pdfFiles.push({ 
          file, 
          pages: 'all'
        });
        validFiles++;
      }
      
      if (validFiles > 0) {
        showToast(`Added ${validFiles} PDF file(s)`, "success");
        updateFileDisplay();
      }
    }

    // File List Display
    function updateFileDisplay() {
      elements.fileList.innerHTML = "";
      let totalSize = 0;

      pdfFiles.forEach(({ file }, index) => {
        totalSize += file.size;
        const fileItem = createFileItem(file, index);
        elements.fileList.appendChild(fileItem);
      });

      elements.totalSize.textContent = `${(totalSize / 1024 / 1024).toFixed(1)} MB`;
      elements.fileCount.textContent = pdfFiles.length;
    }

    function createFileItem(file, index) {
      const div = document.createElement("div");
      div.className = "file-item d-flex align-items-center gap-3 p-3 mb-3 rounded bg-body-secondary";
      div.innerHTML = `
        <span class="serial-number fw-bold">${index + 1}.</span>
        <div class="flex-grow-1">
          <div class="d-flex justify-content-between mb-1">
            <span class="text-truncate" style="max-width: 300px">${file.name}</span>
            <small class="text-muted">${(file.size / 1024 / 1024).toFixed(1)} MB</small>
          </div>
          <div class="progress" style="height: 4px;">
            <div class="progress-bar" role="progressbar" style="width: 100%"></div>
          </div>
        </div>
        <div class="btn-group">
          <button class="btn btn-sm btn-outline-secondary" onclick="moveFile(${index}, -1)" ${index === 0 ? 'disabled' : ''}>
            <i class="bi bi-arrow-up"></i>
          </button>
          <button class="btn btn-sm btn-outline-secondary" onclick="moveFile(${index}, 1)" ${index === pdfFiles.length - 1 ? 'disabled' : ''}>
            <i class="bi bi-arrow-down"></i>
          </button>
          <button class="btn btn-sm btn-outline-danger" onclick="removeFile(${index})">
            <i class="bi bi-trash"></i>
          </button>
        </div>
      `;
      return div;
    }

    // File Manipulation
    function moveFile(index, direction) {
      const newIndex = index + direction;
      if (newIndex < 0 || newIndex >= pdfFiles.length) return;
      [pdfFiles[index], pdfFiles[newIndex]] = [pdfFiles[newIndex], pdfFiles[index]];
      updateFileDisplay();
    }

    function removeFile(index) {
      pdfFiles.splice(index, 1);
      updateFileDisplay();
      showToast("PDF removed", "info");
    }

    // Merge Functionality
    elements.mergeBtn.addEventListener("click", mergeFiles);

    async function mergeFiles() {
      if (pdfFiles.length < 1) {
        showToast("Add at least one PDF to merge", "warning");
        return;
      }

      showProgress(true);
      const mergedPdf = await PDFLib.PDFDocument.create();

      try {
        for (let i = 0; i < pdfFiles.length; i++) {
          const { file } = pdfFiles[i];
          const arrayBuffer = await file.arrayBuffer();
          const pdf = await PDFLib.PDFDocument.load(arrayBuffer);
          const copiedPages = await mergedPdf.copyPages(pdf, pdf.getPageIndices());
          copiedPages.forEach(page => mergedPdf.addPage(page));
          updateProgress((i + 1) / pdfFiles.length * 100);
        }

        const mergedPdfBytes = await mergedPdf.save();
        handleMergeSuccess(mergedPdfBytes);
      } catch (error) {
        showToast("Error merging files: " + error.message, "danger");
        showProgress(false);
      }
    }

    // Progress Handling
    function showProgress(show) {
      elements.progressWrapper.style.display = show ? "block" : "none";
    }

    function updateProgress(percentage) {
      elements.progressBar.style.width = `${percentage}%`;
      elements.progressBar.textContent = `${Math.floor(percentage)}%`;
    }

    // Merge Success Handling
    function handleMergeSuccess(mergedPdfBytes) {
      const blob = new Blob([mergedPdfBytes], { type: "application/pdf" });
      const url = URL.createObjectURL(blob);
      
      document.getElementById("downloadBtn").onclick = () => {
        const fileNameInput = document.getElementById("pdfNameInput");
        let fileName = fileNameInput.value.trim();
        
        // Ensure .pdf extension
        if (!fileName.toLowerCase().endsWith('.pdf')) {
          fileName += '.pdf';
        }
        
        // Default name if empty
        if (!fileName) {
          fileName = "merged.pdf";
        }
        
        downloadFile(url, fileName);
        updateHistory(fileName);
        bootstrap.Modal.getInstance(document.getElementById("renameModal")).hide();
      };
      
      showProgress(false);
      new bootstrap.Modal(document.getElementById("renameModal")).show();
    }

    function downloadFile(url, fileName) {
      const a = document.createElement("a");
      a.href = url;
      a.download = fileName;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      showToast("Download started", "success");
    }

    function updateHistory(fileName) {
      const historyItem = {
        name: fileName,
        date: new Date().toLocaleString(),
        size: pdfFiles.reduce((sum, { file }) => sum + file.size, 0)
      };
      
      const historyElement = createHistoryItem(historyItem);
      elements.historyList.prepend(historyElement);
      
      const history = JSON.parse(localStorage.getItem("pdfHistory")) || [];
      history.unshift(historyItem);
      localStorage.setItem("pdfHistory", JSON.stringify(history.slice(0, 10)));
    }

    function createHistoryItem({ name, date, size }) {
      const li = document.createElement("li");
      li.className = "list-group-item d-flex justify-content-between align-items-center";
      li.innerHTML = `
        <div class="d-flex align-items-center">
          <i class="bi bi-file-earmark-pdf text-highlight me-3 fs-5"></i>
          <div>
            <div class="fw-medium">${name}</div>
            <small class="text-muted">${date}</small>
          </div>
        </div>
        <small class="text-muted">${(size / 1024 / 1024).toFixed(1)} MB</small>
      `;
      return li;
    }

    // Theme Toggle
    elements.themeToggle.addEventListener("click", toggleTheme);

    function toggleTheme() {
      const currentTheme = document.documentElement.getAttribute('data-bs-theme');
      const newTheme = currentTheme === 'light' ? 'dark' : 'light';
      document.documentElement.setAttribute('data-bs-theme', newTheme);
      localStorage.setItem("theme", newTheme);
      
      // Update icon
      const icon = elements.themeToggle.querySelector('i');
      icon.className = newTheme === 'dark' ? 'bi bi-sun-fill' : 'bi bi-moon-stars-fill';
    }

    // Toast System
    function showToast(message, type = "info") {
      const toast = document.createElement("div");
      toast.className = `toast show align-items-center text-bg-${type} border-0 mb-2`;
      toast.setAttribute('role', 'alert');
      toast.innerHTML = `
        <div class="d-flex">
          <div class="toast-body">${message}</div>
          <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
        </div>
      `;
      document.getElementById("toastContainer").appendChild(toast);
      
      // Auto-remove after delay
      setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => toast.remove(), 150);
      }, 3000);
    }
  </script>
</body>
</html>